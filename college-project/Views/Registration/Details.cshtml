@model college_project.Models.StudentRegistration

@{
    ViewData["Title"] = "Application Details";
    Layout = "_AdminLayout";
}

<link rel="stylesheet" href="~/css/registration-print.css" media="all" />

<div class="container-fluid">

    <!-- Actions Toolbar (Hidden in Print) -->
    <!-- Centered to match the paper width on screen -->
    <div class="d-flex justify-content-between align-items-center mb-4 no-print" style="max-width: 210mm; margin: 0 auto;">
        <h1 class="h3 mb-0 text-gray-800">Student: @Model.FullName</h1>
        <div>
            <button onclick="window.print()" class="btn btn-dark me-2 shadow-sm">
                <i class="bi bi-printer-fill me-2"></i>Print / Save PDF
            </button>
            <a asp-action="Index" class="btn btn-outline-secondary shadow-sm">Back to List</a>
        </div>
    </div>

    <!-- Printable Area Wrapper -->
    <div class="print-wrapper" id="printableArea">

        <!-- 1. Header Section -->
        <table class="header-table">
            <tr>
                <td style="width: 20%; vertical-align: middle;">
                    <img src="~/images/logo.png" alt="Logo" class="print-logo">
                </td>
                <td style="width: 60%; text-align: center; vertical-align: middle;">
                    <h1 class="college-name">OXFORD COLLEGE</h1>
                    <p class="college-slogan">Excellence in Education & Professional Training</p>
                    <div class="doc-title-box">ENROLLMENT APPLICATION FORM</div>
                </td>
                <td style="width: 20%; text-align: right; vertical-align: middle;">
                    <div class="ref-box">
                        <span class="ref-label">Reference ID</span>
                        <span class="ref-value">#@Model.Id</span>
                    </div>
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=@Model.Id-@Model.FullName" class="qr-code" alt="QR Code">
                </td>
            </tr>
        </table>

        <!-- 2. Main Content Table (Guarantees Side-by-Side Layout) -->
        <table class="content-table">
            <tr>
                <!-- Left Column: Personal Info -->
                <td class="info-col">
                    <div class="section-box h-100">
                        <div class="section-header">APPLICANT PROFILE</div>
                        <div class="section-body text-center">

                            <!-- Personal Photo -->
                            <div class="photo-wrapper">
                                <img src="@Model.PersonalPhotoPath" class="student-photo" alt="Photo" onerror="this.src='https://placehold.co/150x180?text=No+Photo'">
                            </div>

                            <!-- Data List -->
                            <table class="data-table text-start">
                                <tr>
                                    <td class="label">Full Name</td>
                                </tr>
                                <tr>
                                    <td class="value text-uppercase">@Model.FullName</td>
                                </tr>

                                <tr>
                                    <td class="label">Phone Number</td>
                                </tr>
                                <tr>
                                    <td class="value font-monospace">@Model.PhoneNumber</td>
                                </tr>

                                <tr>
                                    <td class="label">Major</td>
                                </tr>
                                <tr>
                                    <td class="value highlight">@Model.Major</td>
                                </tr>

                                <tr>
                                    <td class="label">Registration Date</td>
                                </tr>
                                <tr>
                                    <td class="value">@Model.RegistrationDate.ToString("yyyy-MM-dd HH:mm")</td>
                                </tr>
                            </table>

                            <!-- Agreement Badge -->
                            <div class="agreement-box">
                                <span class="check-icon">✓</span>
                                <div class="text-start">
                                    <strong>CHARTER SIGNED</strong><br>
                                    <small class="text-muted">Transparency Policy Agreed</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>

                <!-- Right Column: Documents -->
                <td class="docs-col">
                    <div class="section-box h-100">
                        <div class="section-header">OFFICIAL ATTACHMENTS</div>
                        <div class="section-body">

                            <!-- Qualification -->
                            <div class="doc-item">
                                <div class="doc-label">Qualification Certificate</div>
                                <div class="doc-img-container">
                                    <img src="@Model.QualificationImagePath" class="doc-img" alt="Qualification" onerror="this.src='https://placehold.co/400x200?text=No+Document'">
                                </div>
                            </div>

                            <!-- Identity -->
                            <div class="doc-item mt-4">
                                <div class="doc-label">Identity Document</div>
                                <div class="doc-img-container">
                                    <img src="@Model.IdentityImagePath" class="doc-img" alt="Identity" onerror="this.src='https://placehold.co/400x200?text=No+Document'">
                                </div>
                            </div>

                        </div>
                    </div>
                </td>
            </tr>
        </table>

        <!-- 3. Footer -->
        <div class="print-footer">
            <table class="w-100">
                <tr>
                    <td class="text-start">Oxford College - System Report</td>
                    <td class="text-center">CONFIDENTIAL DOCUMENT</td>
                    <td class="text-end">Printed: @DateTime.Now.ToString("dd MMM yyyy HH:mm")</td>
                </tr>
            </table>
        </div>

    </div>
</div>